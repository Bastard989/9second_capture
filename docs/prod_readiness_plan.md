# 9second_capture: план доведения до production

Дата ревизии: 2026-02-18

## 1) Текущее состояние

- Локальная ветка `main` совпадает с `origin/main` по коммиту `6f80a2f`.
- Основной record-first pipeline уже работает:
  - финальная обработка после `Stop`;
  - MP3 materialization/fallback;
  - raw/clean/report/structured артефакты.
- База тестов устойчива (по последнему прогону): `145 passed, 4 skipped, 0 failed`.

## 2) Что уже на production-пути (готово)

- Режимы работы (driver/browser/api/quick) с backend-ограничениями.
- API для отчетов и конвертаций:
  - `/report`,
  - `/structured`,
  - `/senior-brief`,
  - `/artifact`.
- Локальное хранение артефактов по `meeting_id`.
- Набор runbook/ADR/qa-документов в `docs/`.

## 3) Критичные пробелы до production

### P0 (обязательно перед релизом)

- E2E сценарии для нового UI потока `MP3 -> TXT -> convert`:
  - smoke на 4 режимах;
  - проверка сохранения имен файлов;
  - проверка экспорта всех форматов.
- Закрыть auth-зависимости в CI/тестовом окружении (`jwt` пакеты для skip-тестов).
- Финальная проверка UX-ошибок:
  - понятные сообщения в UI при 4xx/5xx;
  - единое поведение при отмене file picker.

### P1 (сильное улучшение надежности)

- Идемпотентность повторных нажатий экспортных кнопок (защита от дублей).
- Ограничения на размер/длительность входных файлов с явным UI-фидбеком.
- Расширение мониторинга:
  - отдельные метрики `report/structured/senior` операций;
  - алерты на рост ошибок конвертации.

### P2 (операционная зрелость)

- Подготовка релизного процесса:
  - версия UI/API в changelog;
  - регресс-набор перед сборкой desktop-app.
- UX-полировка:
  - явные индикаторы "файл успешно сохранен";
  - более наглядный onboarding для первого запуска.

## 4) План итераций

1. `Итерация A (1-2 дня)`  
   UI/UX заморозка + e2e smoke + ручной regression checklist.
2. `Итерация B (1-2 дня)`  
   CI hardening: auth deps, стабильный тест-прогон, error handling.
3. `Итерация C (1 день)`  
   Релиз-кандидат: сборка app, финальная приемка, release notes.

## 5) Definition of Done для production-ready

- Все ключевые e2e сценарии green.
- Unit/integration тесты green без критичных skip.
- Нет блокирующих ошибок в smoke-логах.
- Полный пользовательский путь (не-технический) проходится по гайду:
  - запись/импорт MP3,
  - raw/clean отчет,
  - JSON/CSV/Table/Senior экспорт.
